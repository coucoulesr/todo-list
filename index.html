<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>To-Do</title>
		<link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Muli&display=swap" rel="stylesheet">
    <style>
      body {
        background-image: url("static/bg.jpg");
      }
    </style>
	</head>

  <body>
    <div class="container">
      <div id="app">
          <h1>To-Do</h1>
            <div class="task-wrapper" ref="check">
                <div class="tasks" v-for="(task, index) in tasks">
                  <div class="check"><img src="static/checkbox.svg" @mouseover="checkHover(index)" @mouseout="checkOff(index)" @click="clickCheck(index)"></div>
                  <div class="task"><p>{{ task }}</p></div>
                  <div class="trash"><img src="static/trash.svg" @mouseover="trashHover(index)" @mouseout="trashOff(index)" @click="clickTrash(index)"></div>
                </div>
              </div>
            <div class="add"><p>+</p></div>
      </div>
      <div class="attribution">Â© 2019 Richard Coucoules</div>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script>
    var tasks = ["Sweep the floor", "Walk the dog", "Take out the trash", "Mow the lawn", "Go grocery shopping"];
    var app = new Vue({
      el: "#app",
      data: {
        tasks: tasks,

				trashSrc: 'static/trash.svg',
				trashHoverSrc: 'static/trash-mouseover.svg',

				checkBoxSrc: 'static/checkbox.svg',
				checkBoxHoverSrc: 'static/checkbox-hover.svg',
				checkedBoxSrc: 'static/checked-box.svg',
        },
      methods: {
        createTask: function(task) {
          this.tasks.push(task);
        },

				trashHover: function(index) {
					let trash = this.$refs.check.children[index].children[2].children[0];
					trash.setAttribute('src', this.trashHoverSrc);
				},
				trashOff: function(index) {
					let trash = this.$refs.check.children[index].children[2].children[0];
					trash.setAttribute('src', this.trashSrc);
				},
				clickTrash: function(index) {
					this.tasks.splice(index, 1);
				},

				checkHover: function(index) {
					let checkBox = this.$refs.check.children[index].children[0].children[0];
					let task = this.$refs.check.children[index].children[1];
					if (!task.classList.contains('finished')) {
						checkBox.setAttribute('src', this.checkBoxHoverSrc);
					}
				},
				checkOff: function(index) {
					let checkBox = this.$refs.check.children[index].children[0].children[0];
					let task = this.$refs.check.children[index].children[1];
					if (!task.classList.contains('finished')) {
						checkBox.setAttribute('src', this.checkBoxSrc);
					}
				},
				clickCheck: function(index) {
					let checkBox = this.$refs.check.children[index].children[0].children[0];
					let task = this.$refs.check.children[index].children[1];
					task.classList.toggle('finished');
					if (checkBox.getAttribute('src') == this.checkBoxHoverSrc) {
						checkBox.setAttribute('src', this.checkedBoxSrc);
					}
					else {
						checkBox.setAttribute('src', this.checkBoxSrc)
					}
				},
      },
    });
  </script>
</html>
